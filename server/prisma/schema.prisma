generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Household {
  id        Int          @id @default(autoincrement())
  name      String       @db.VarChar(120)
  members   Int          @default(1)
  postcode  String       @db.VarChar(10)
  createdAt DateTime     @default(now()) @map("created_at")
  entries   UsageEntry[]

  @@map("household")
}

model UsageEntry {
  id           Int       @id @default(autoincrement())
  householdId  Int       @map("household_id")
  entryType    String    @map("entry_type") @db.VarChar(20) // 'water' or 'energy'
  value        Float     // litres for water, kWh for energy
  recordedAt   DateTime  @default(now()) @map("recorded_at")
  household    Household @relation(fields: [householdId], references: [id])

  @@map("usage_entry")
}